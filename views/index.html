<!doctype html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

		<title>Who watches the watchers</title>
		<meta name="description" content=""> 
		<meta name="viewport" content="width=device-width">
 
 
 

 		<style type="text/css">
			.yui3-skin-night {
				background-color: #000;
		    }
	 		body{padding:50px; height:100%;}
	 		label {padding: 5px;}
	 		input{font-size:110%;padding:4px;}
	 		.repo-link{color:#8E8E8E;}
 		</style>
	</head>
	<body class="yui3-skin-night">
		<form>
	 		<div class="form-row">
	 			<input type="text" id="name" placeholder="Github User Name" /> <button id="loadRepos"> Get Repos </button>
	 		</div>

	 		<div class="form-row">
	 			
	 		</div>
		</form>	
		<div id="results"></div>
 
	<script src="http://yui.yahooapis.com/3.5.0/build/yui/yui-min.js"></script>
 	<script type="text/javascript">
 		YUI({skin: 'night'}).use('node-base', 'event-base', 'io-base','button-plugin', 'cssbutton', 'json', 'datatable-sort', 'substitute', function(Y){
 			var formatter = function link(o) { 
 					o.cell.setContent(Y.substitute('<a href="{url}" class="repo-link">{name}</a>', {url: o.data.url, name:o.data.name}))	 
				},
 				ioCompleted = function(id, res, args){ 
 					Y.one('#results').set('innerHTML', '');
					var results = Y.JSON.parse(res.responseText);
 
					var table = new Y.DataTable({
						columns: [
							{key: "name", label: "Project Name", sortable:true, nodeFormatter:formatter}, 
							{key: "description", label: "Description", sortable:true}, 
							{key: "language", label: "Language of Project", sortable:true},
							{key: "owner", label: "Project Owner", sortable: true}
						], 
						data: results,
						caption: "Watched Repositories!",
						summary: "Github Repositories that are being watched"
					}); 
					table.render("#results"); 
				};
			Y.on('io:complete', ioCompleted);
 			Y.on('domready', function(){
 				var button = Y.one('#loadRepos');
 				button.plug(Y.Plugin.Button);
				button.on('click', function(e){ 
					e.preventDefault();
					var url;
					if(Y.one('#name').get('value')){
						url = '/repos/' + Y.one('#name').get('value');
						Y.io(url); 
					}
				}); 
			});
 		});
 	</script>
 	<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1847639-6']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>
</html>